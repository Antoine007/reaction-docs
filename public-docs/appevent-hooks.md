---
id: appevent-hooks
title: App Event Hooks
---

The `Hooks.Events` API and `MethodHooks` from previous versions of Reaction have been deprecated in favor of `appEvents`. `appEvents`, like hooks, allow you to attach callbacks to particular events throughout the app lifecycle.

## Emit an app event

Emit app events in API code using `appEvents.emit`. There is currently no limit to what event name you can emit, but generally try to follow established patterns for naming.

### In New Server Code

```js
context.appEvents.emit("eventName", payload, options);
```

### In Meteor Server Code

```js
import Reaction from "/imports/plugins/core/core/server/Reaction";
import getGraphQLContextInMeteorMethod from "/imports/plugins/core/graphql/server/getGraphQLContextInMeteorMethod";

// In a Meteor method or publication:
const context = Promise.await(getGraphQLContextInMeteorMethod(Reaction.getUserId()));
context.appEvents.emit("eventName", payload, options);
```

## Listen for an app event

See "Run plugin code on app startup" and attach event listeners in startup code.

```js
// In startup function:
context.appEvents.on("eventName", (payload, options) => {
  // Handle the event
});
```

## Events

Events that are currently defined in Core are:

| Event                                                                                                                                                                                                                                                                                                            | Arguments                                                                                                                                                                                       | Previous hook and arguments                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `afterAccountCreate`                                                                                                                                                                                                                                                                                             | `{ account, createdBy, isFirstOwnerAccount }`                                                                                                                                                   | `afterAccountsInsert` Arguments: userId, accountId"                                                                                                                                                                                                                                                                                                                                |
| `afterAccountUpdate`                                                                                                                                                                                                                                                                                             | `{ account, updatedBy, updatedFields }`                                                                                                                                                         | `afterAccountsUpdate` Arguments: userId, { accountId, updatedFields }                                                                                                                                                                                                                                                                                                             |
| `afterAccountDelete`                                                                                                                         |                             |                     | |                                                                                                             | `{ account, deletedBy }`                                                                                                                                                                        | `afterAccountsRemove` Arguments: userId, accountId                                                                                                                                                                                                                                                                                                                                |
| `afterAddUnverifiedEmailToUser`                                                                                                                                                                                                                                                                                  | `{ email, userId }`                                                                                         | N/A                         |                     |                               |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterVariantSoftDelete`                                                                                                                                                                                                                                                                                         | `{ variant, deletedBy }`                                                                                           | `afterRemoveCatalogProduct` |                     |                        | `afterRemoveCatalogProduct`                                                                                                                                                                                                                                                                                                                                                         |
| `afterProductSoftDelete`                                                                                                                                                                                                                                                                                         | `{ product, deletedBy }`                                                                                                                                                                        | `afterRemoveProduct` Arguments: product                                                                                                                                                                                                                                                                                                                                           |
| `afterVariantUpdate`                                                                                                                                                                                                                                                                                             | `{ _id, field, value }`                                                                                                 | N/A                         |                     |                    |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterPublishProductToCatalog`                                                                                                                                                                                                                                                                                   | `{ catalogProduct, product }`                                                                                                                                                                   | `afterPublishProductToCatalog` Arguments: product, catalogProduct                                                                                                                                                                                                                                                                                                                 |
| `afterOrderUpdate`                                                                                                                                                                                                                                                                                               | `{ order, updatedBy }`                                                                                                   | N/A                         |                     |                  |                                                                                                                                                                                                                                                                                                                                                                                     |
| `jobServerStart`                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                 | `onJobServerStart` Arguments: NONE                                                                                                                                                                                                                                                                                                                                                |
| `afterCoreInit`                                                                                                                              |                             |                     | | Deprecated. Do not use in new code. Put your code directly in a non-Meteor plugin startup function instead. |                                                                                                                                                                                                 | `onCoreInit`  Arguments: NONE                                                                                                                                                                                                                                                                                                                                                     |
| `sendEmail`                                                                                                                                                                                                                                                                                                      | `{ job, sendEmailCompleted, sendEmailFailed }`                                                                                  | N/A                         |                     |           |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterShopCreate`                                                                                                                                                                                                                                                                                                | `{ createdBy, shop }`                                                                                                     | N/A                         |                     |                 |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterMediaInsert`                                                                                                                                                                                                                                                                                               | `{ createdBy, mediaRecord }`                                                                                             | N/A                         |                     |                  |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterMediaUpdate`                                                                                                                                                                                                                                                                                               | `{ createdBy, mediaRecord }`                                                                                             | N/A                         |                     |                  |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterMediaRemove`                                                                                                                           |                             |                     | |                                                                                                             | `{ createdBy, mediaRecord }`                                                                                                              | N/A                         |                     | |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterOrderApprovePayment`                                                                                                                                                                                                                                                                                       | `{ approvedBy, order }`                                                                                          | N/A                         |                     |                          |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterOrderCancel`                                                                                                                                                                                                                                                                                               | `{ cancelledBy, order, returnToStock }`                                                                                  | N/A                         |                     |                  |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterOrderPaymentCapture`                                                                                                                                                                                                                                                                                       | `{ capturedBy, order, payment }`                                                                                 | N/A                         |                     |                          |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterOrderCreate`                                                                                                                                                                                                                                                                                               | `{ createdBy, order }`                                                                                                   | N/A                         |                     |                  |                                                                                                                                                                                                                                                                                                                                                                                     |
| `afterNotificationCreate`                                                                                                                                                                                                                                                                                        | `{ createdBy, notification }`                                                                                     | N/A                         |                     |                         |                                                                                                                                                                                                                                                                                                                                                                                     |
| No longer emitted. Instead `afterAccountCreate` is emitted and will have `isFirstOwnerAccount` set to `true`.                                                                                                                                                                                                    |                                                                                                                                                                                                 | `afterCreateDefaultAdminUser` Arguments: user                                                                                                                              |                             |                     |                                                                                                                                                    |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `beforeUpdateOrderWorkflow`                                                                                              |                             |                     | | Arguments: order, options                                                                                                                    |                             |                     | |
| No longer emitted. Use `afterOrderUpdate`.                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                 | `afterUpdateOrderUpdateSearchRecord`                                                             |                             |                     | | Arguments: order                                                                                                                             |                             |                     |                         |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `afterInsertProduct`                                                                                                     |                             |                     | | Arguments: product                                                                                                                           |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `beforeUpdateCatalogProduct`                                                                                             |                             |                     | | Arguments: product, { userId, modifier }                                                                                                     |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `afterUpdateCatalogProduct`                                                                                              |                             |                     | | Arguments: productId, { modifier }                                                                                                           |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `beforeRemoveCatalogProduct`                                                                                             |                             |                     | | Arguments: product, { userId }                                                                                                               |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `afterRemoveCatalogProduct`                                                                                              |                             |                     | | Arguments: userId, productId                                                                                                                 |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `beforeCoreInit`                                                                                                         |                             |                     | | Arguments: NONE                                                                                                                              |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `onCoreInit`                                                                                                             |                             |                     | | Arguments: NONE                                                                                                                              |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `onImport${collectionName}`                                                                                              |                             |                     | | Arguments: object                                                                                                                            |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `onCreateUser`                                                                                                           |                             |                     | | Arguments: user, options                                                                                                                     |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `onLogin`                                                                                                                |                             |                     | | Arguments: options                                                                                                                           |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `afterSecurityInit`                                                                                                      |                             |                     | | Arguments: options                                                                                                                           |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `onOrderRefundCreated`                                                                                                   |                             |                     | | Arguments: orderId                                                                                                                           |                             |                     | |
| No longer emitted.                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                 | `onOrderShipmentDelivered`                                                                                               |                             |                     | | Arguments: orderId                                                                                                                           |                             |                     | |
| Try using afterOrderUpdate.                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                 | `onOrderShipmentShipped`                                                                                        |                             |                     | | Arguments: orderId                                                                                                                           |                             |                     |          |
| Instead of using events, you can now register a function of type getPageSitemapItems to extend the sitemap.                                                                                                                                                                                                      |                                                                                                                                                                                                 | `onGenerateSitemap`  Arguments: urls                                                                                                                                                                                                                                                                                                                                              |
